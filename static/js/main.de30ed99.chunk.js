(this["webpackJsonpnear-roketo"]=this["webpackJsonpnear-roketo"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t){},142:function(e,t){},200:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(108),o=n.n(c),r=(n(134),n(13)),s=n(34),l=n(83),d=n(16),j=n.n(d),b=n(46),m="streaming-r-v2.dcversus.testnet",p="wrap.testnet",u="adriano.testnet";var h=function(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",roketoAccount:m,wrapAccount:p,dappAccount:u,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.mainnet.near.org"};case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",roketoAccount:m,wrapAccount:p,dappAccount:u,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};default:throw Error('Unknown environment "'.concat(e,'".'))}},x=h("testnet");function O(){return(O=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.connect)(Object.assign({deps:{keyStore:new b.keyStores.BrowserLocalStorageKeyStore}},x));case 2:t=e.sent,window.walletConnection=new b.WalletConnection(t),window.accountId=window.walletConnection.getAccountId(),window.roketoContract=new b.Contract(window.walletConnection.account(),x.roketoAccount,{viewMethods:["get_stream","get_account","get_account_incoming_streams","get_account_outgoing_streams","get_stats"],changeMethods:["start_stream","pause_stream","stop_stream","withdraw"]}),window.wrapContract=new b.Contract(window.walletConnection.account(),x.wrapAccount,{viewMethods:["ft_balance_of"],changeMethods:["near_deposit","ft_transfer_call","ft_transfer"]});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(229),f=n(230),w=n(232),k=n(233),v=n(227),y=n(1);function _(){var e=window.walletConnection.account(),t=Object(a.useState)(0),n=Object(r.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)((function(){window.accountId&&window.wrapContract&&window.wrapContract.ft_balance_of({account_id:"".concat(window.accountId)}).then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]),Object(y.jsx)(g.a,{sx:{flexGrow:1},children:Object(y.jsx)(f.a,{position:"static",children:Object(y.jsxs)(w.a,{children:[Object(y.jsx)(k.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"NNap"}),e.accountId?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(g.a,{style:{display:"flex",flexDirection:"column",textAlign:"right"},children:[Object(y.jsx)(k.a,{variant:"caption",children:e.accountId}),Object(y.jsxs)(k.a,{variant:"caption",children:[Object(s.formatNearAmount)(i,4)," wNEAR"]})]}),Object(y.jsx)(v.a,{sx:{marginLeft:2},variant:"outlined",color:"inherit",onClick:function(){return window.walletConnection.signOut(),void window.location.reload()},children:"Logout"})]}):Object(y.jsx)(v.a,{color:"inherit",onClick:function(){window.walletConnection.requestSignIn(x.dappAccount)},children:"Login"})]})})})}var C=n(234),A=n(225),S=n(235),I=n(236),N=n(237),R=n(238),T=n(116),B=n.n(T),E=n(113),F=n.n(E),P=n(117),U=n.n(P),M=n(118),L=n.n(M),z=n(115),J=n.n(z),D=n(114),G=n.n(D),W=n.p+"static/media/freedrinks.88738208.jpg",q=n.p+"static/media/insidesleepstation.8b0bd196.jpg",H=n.p+"static/media/lobby.0e1ae949.jpg",K=n.p+"static/media/lockers.39539d6c.jpg",Q=n.p+"static/media/sleepstationdetail.94727617.jpg",V=n.p+"static/media/sleepstations.c24ab402.jpg",X=[{img:H,title:"Lobby"},{img:n.p+"static/media/stairs.8883686a.jpg",title:"Stairs"},{img:K,title:"Lockers"},{img:V,title:"Sleep stations"},{img:Q,title:"Sleep station detail"},{img:q,title:"Inside station"},{img:n.p+"static/media/storage.f1f84c9e.jpg",title:"Storage inside sleep stations"},{img:W,title:"Free drinks"}];var Y=function(){return Object(y.jsxs)(g.a,{style:{display:"flex",flexDirection:"row"},children:[Object(y.jsxs)(g.a,{style:{display:"flex",flexDirection:"column",marginTop:"1em",paddingRight:"1em",flex:1},children:[Object(y.jsx)(k.a,{variant:"h5",children:"Pay per minute bed and all day breakfast"}),Object(y.jsxs)(C.a,{style:{marginTop:16},children:[Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(F.a,{})}),Object(y.jsx)(I.a,{primary:"Open 24/7"})]}),Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(G.a,{})}),Object(y.jsx)(I.a,{primary:"Contactless check in"})]}),Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(J.a,{})}),Object(y.jsx)(I.a,{primary:"Comfortable beds"})]}),Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(B.a,{})}),Object(y.jsx)(I.a,{primary:"Wi-fi"})]}),Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(U.a,{})}),Object(y.jsx)(I.a,{primary:"Free locker"})]}),Object(y.jsxs)(A.a,{disablePadding:!0,children:[Object(y.jsx)(S.a,{children:Object(y.jsx)(L.a,{})}),Object(y.jsx)(I.a,{primary:"Shared bathroom"})]})]})]}),Object(y.jsx)(N.a,{style:{flex:2},cols:4,rowHeight:180,children:X.map((function(e,t){return Object(y.jsx)(R.a,{children:Object(y.jsx)("img",{src:"".concat(e.img,"?w=130&h=86&fit=crop&auto=format"),srcSet:"".concat(e.img,"?w=130&h=86&fit=crop&auto=format&dpr=2 2x"),alt:e.title,loading:"lazy"})},t)}))})]})},Z=n(70),$=n.n(Z),ee=n(47),te=n.n(ee),ne=n(239),ae=n(240),ie=n(241),ce=n(242),oe=n.p+"static/media/sleepstation.00b86089.jpg",re=n.p+"static/media/relaxation.56f08de9.jpg",se=n.p+"static/media/restaurant.ae40d7c9.jpg",le=h("testnet");var de=function(){var e=Object(a.useState)(!0),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)([]),o=Object(r.a)(c,2),l=o[0],d=o[1],j=Object(a.useState)({booked:!1,endTimestamp:0}),b=Object(r.a)(j,2),m=b[0],p=b[1],u=Object(a.useState)({booked:!1,endTimestamp:0}),h=Object(r.a)(u,2),x=h[0],O=h[1],f=Object(a.useState)({booked:!1,endTimestamp:0}),w=Object(r.a)(f,2),_=w[0],C=w[1];Object(a.useEffect)((function(){window.accountId?i(!1):i(!0),S()}),[]),Object(a.useEffect)((function(){l.length>0&&(console.log(l),l.map((function(e){if(e.description&&"Active"===e.status){var t=JSON.parse(e.description),n=t.room,a=t.minutes,i=te()(e.timestamp_created/1e6).add(a,"minutes");if(te()().valueOf()<i)switch(n){case"sleepstation":p({booked:!0,endTimestamp:i});break;case"relaxation":O({booked:!0,endTimestamp:i});break;case"restaurant":C({booked:!0,endTimestamp:i});break;default:console.log("Room not valid")}}})))}),[l]);var A=function(e){var t=Object(s.parseNearAmount)(e.price.toString()),n=$()(t).div(60).toFixed(0),a=$()(t).div(3600).toFixed(0),i=$()(n).times(e.minutes).toFixed(0),c={receiver_id:le.roketoAccount,amount:i,memo:"memo",msg:JSON.stringify({Create:{request:{owner_id:window.accountId,receiver_id:le.dappAccount,tokens_per_sec:parseInt(a),description:JSON.stringify(e)}}})};window.wrapContract.ft_transfer_call(c,3e14,1).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},S=function(){window.roketoContract.get_account_outgoing_streams({account_id:window.accountId,from:0,limit:10}).then((function(e){d(e)})).catch((function(e){console.log(e)}))};return Object(y.jsxs)(g.a,{children:[Object(y.jsxs)(g.a,{style:{display:"flex",marginBottom:"1em"},children:[Object(y.jsxs)(ne.a,{style:{marginRight:"1em",flex:1},children:[Object(y.jsx)(ae.a,{component:"img",height:"300",image:oe,alt:"Sleep station"}),Object(y.jsxs)(ie.a,{children:[Object(y.jsx)(k.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Sleep station"}),Object(y.jsx)(k.a,{variant:"body1",color:"text.secondary",children:"Absolute silence station with comfortable bed and pillow under artificial twinkling stars and live plants."}),Object(y.jsx)(k.a,{variant:"subtitle2",color:"text.secondary",children:Object(y.jsxs)("ul",{style:{paddingInlineStart:"1em"},children:[Object(y.jsx)("li",{children:"2 NEAR per hour"}),Object(y.jsx)("li",{children:"Minimum of 15 minutes"}),Object(y.jsx)("li",{children:"5 spaces left"})]})})]}),Object(y.jsxs)(ce.a,{children:[Object(y.jsx)(v.a,{size:"small",variant:"contained",onClick:function(){return A({room:"sleepstation",price:2,minutes:15})},disabled:m.booked,children:m.booked?"Already booked":"Book"}),Object(y.jsx)(k.a,{variant:"caption",children:m.booked?"finishs ".concat(te()().to(m.endTimestamp)):""})]})]}),Object(y.jsxs)(ne.a,{style:{marginRight:"1em",flex:1},children:[Object(y.jsx)(ae.a,{component:"img",height:"300",image:re,alt:"Relaxation room"}),Object(y.jsxs)(ie.a,{children:[Object(y.jsx)(k.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Relaxation room"}),Object(y.jsx)(k.a,{variant:"body1",color:"text.secondary",children:"Casual relaxation space filled with cozy moon pods and yoga mats for meditation classes."}),Object(y.jsx)(k.a,{variant:"subtitle2",color:"text.secondary",children:Object(y.jsxs)("ul",{style:{paddingInlineStart:"1em"},children:[Object(y.jsx)("li",{children:"1 NEAR per hour"}),Object(y.jsx)("li",{children:"Minimum of 15 minutes"}),Object(y.jsx)("li",{children:"5 spaces left"})]})})]}),Object(y.jsxs)(ce.a,{children:[Object(y.jsx)(v.a,{size:"small",variant:"contained",onClick:function(){return A({room:"relaxation",price:1,minutes:15})},disabled:x.booked,children:x.booked?"Already booked":"Book"}),Object(y.jsx)(k.a,{variant:"caption",children:x.booked?"finishs ".concat(te()().to(x.endTimestamp)):""})]})]}),Object(y.jsxs)(ne.a,{style:{flex:1},children:[Object(y.jsx)(ae.a,{component:"img",height:"300",image:se,alt:"Restaurant"}),Object(y.jsxs)(ie.a,{children:[Object(y.jsx)(k.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Restaurant"}),Object(y.jsx)(k.a,{variant:"body1",color:"text.secondary",children:"All you can eat restaurant serving healthy meals, juices, coffee and tea."}),Object(y.jsx)(k.a,{variant:"subtitle2",color:"text.secondary",children:Object(y.jsxs)("ul",{style:{paddingInlineStart:"1em"},children:[Object(y.jsx)("li",{children:"3 NEAR per hour"}),Object(y.jsx)("li",{children:"Minimum of 30 minutes"}),Object(y.jsx)("li",{children:"5 spaces left"})]})})]}),Object(y.jsxs)(ce.a,{children:[Object(y.jsx)(v.a,{size:"small",variant:"contained",onClick:function(){return A({room:"restaurant",price:3,minutes:30})},disabled:_.booked,children:_.booked?"Already booked":"Book"}),Object(y.jsx)(k.a,{variant:"caption",children:_.booked?"finishs ".concat(te()().to(_.endTimestamp)):""})]})]})]}),Object(y.jsxs)(g.a,{style:{marginBottom:"1em"},children:[Object(y.jsx)(v.a,{disabled:n,variant:"contained",onClick:function(){window.wrapContract.near_deposit({},3e14,Object(s.parseNearAmount)("1"))},children:"Wrap (1 NEAR -> 1 wNEAR)"}),Object(y.jsx)(v.a,{disabled:n,variant:"contained",onClick:function(){window.roketoContract.get_account_incoming_streams({account_id:le.dappAccount,from:0,limit:10}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:"Get incoming streams (dApp)"}),Object(y.jsx)(v.a,{disabled:n,variant:"contained",onClick:function(){return S()},children:"Get outgoing streams (User)"})]})]})};var je=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(_,{}),Object(y.jsxs)(g.a,{style:{margin:"0 1em"},children:[Object(y.jsx)(Y,{}),Object(y.jsx)(de,{})]})]})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),c(e),o(e)}))},me=n(243),pe=n(119),ue=n(228),he=Object(pe.a)({palette:{mode:"dark"},components:{MuiButton:{styleOverrides:{root:{margin:"8px"}}}}});window.nearInitPromise=function(){return O.apply(this,arguments)}().then((function(){o.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsxs)(ue.a,{theme:he,children:[Object(y.jsx)(me.a,{}),Object(y.jsx)(je,{})]})}))})).catch(console.error),be()}},[[200,1,2]]]);
//# sourceMappingURL=main.de30ed99.chunk.js.map